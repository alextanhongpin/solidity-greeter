# Getting started with Solidity

(WIP) Clean up documentation and understand what's happening...

### Installation on macOS

```bash
brew tap ethereum/ethereum
brew install solidity
which solc
```

### Installing Geth

```bash
$ brew tap ethereum/ethereum
$ brew install ethereum
$ geth # starts the server
```

### Creating account

Create an account first. For more info, see [here](https://github.com/ethereum/go-ethereum/wiki/Managing-your-accounts).

```bash
$ geth account new
```

### Starting the interactive JavaScript environment

```bash
$ geth console
```

Now you can do stuff with `eth` and `admin`.


### Linking your compiler in Geth

```bash
$ which solc # get the path/to/solc
$ admin.setSolc("path/to/solc")
```

### Compile soliditity contracts with Geth v1.6

Other solutions [here](https://ethereum.stackexchange.com/questions/15435/how-to-compile-solidity-contracts-with-geth-v1-6)

```
# To generate bytecode:
$ solc --bin soliditySource.sol

# To generate ABI:
$ solc --abi soliditySource.sol
```
Then, with your newly generated bytecode and abi, in geth 1.6:
```javascript
 var abi = <abi from solc>;
 var myContract = eth.contract(abi); 
 var bytecode = '0x' + <bytecode from solc>;
 var txDeploy = {from:eth.coinbase, data: bytecode, gas: 1000000}; 
 var myContractPartialInstance = myContract.new(txDeploy); 

 // Mine block containing transaction...

 var myContractInstance = myContract.at(myContractPartialInstance.address);
```
### Connecting web3 to geth

For localhost:
```bash
$ geth --rpc  --rpccorsdomain="*" --rpcaddr="localhost" console 2>> geth.log
```

In your javascript file with script pointing to `dist/web3.min.js`, include:

```javascript
web3.setProvider(new web3.providers.HttpProvider());
// or
web3.setProvider(new web3.providers.HttpProvider('http://localhost:8545'));
```

Use testrpc for testing
```bash
$ testrpc --secure -u 0 -u 1
```
You may have to "unlock" the account that is sending the transaction using the password you picked in the beginning, because you need to pay for the gas costs to deploying your contract: e.g.
```bash
# At geth console 
$ personal.unlockAccount(web3.eth.accounts[0], "yourPassword")
```

check current block gas limit by running - eth.getBlock("latest"). If you supply more gas than this value, you will face 'Exceeds block gas limit' error


## Start mining

```bash
# Start mining at the test network
$ geth --testnet --datadir "~/.ethereum-testnet" --mine console 2>> ~/.ethereum-testnet.log
# Log the results
$ tail -f ~/.ethereum-testnet.log
```
